\documentclass[10pt]{beamer}

\input{includes}
\input{header}

\begin{document}

\maketitle

\begin{frame}{}
  \centering
  \Large
  \textbf{Partie 3}

  \textbf{Librairies scientifiques et visualisation de données}
\end{frame}


\begin{frame}{Most common libraries in Data Science}

  \begin{block}{Data manipulation libraries}
    \begin{itemize}
      \item \texttt{Numpy}: matrices and multi-dimensional arrays
      \item \texttt{Pandas}: data manipulation and analysis
    \end{itemize}
  \end{block}
  \begin{block}{ML library}
    \begin{itemize}
      \item \texttt{Scikit-learn}: most widely used library
    \end{itemize}
  \end{block}
  \begin{block}{Data visualization libraries}
    \begin{itemize}
      \item \texttt{matplotlib}: unavoidable library
      \item \texttt{seaborn}: high-level interface of \texttt{matplotlib}
    \end{itemize}
  \end{block}
\end{frame}


\section{Librairies scientifiques : SciPy, NumPy}

\begin{frame}[fragile]{Qu'est-ce que NumPy ?}

\textbf{NumPy} (Numerical Python) est la bibliothèque fondamentale pour le calcul scientifique en Python.

\medskip

\textbf{Caractéristiques principales :}
\begin{itemize}
    \item Objet tableau N-dimensionnel puissant (\texttt{ndarray})
    \item Opérations mathématiques efficaces sur les tableaux
    \item Algèbre linéaire, transformées de Fourier, nombres aléatoires
    \item Base de pandas, scikit-learn et la plupart des bibliothèques scientifiques
\end{itemize}

\medskip

\begin{lstlisting}[language=python, numbers=none]
import numpy as np

# Creer un tableau NumPy
arr = np.array(<iterable>)
\end{lstlisting}

\end{frame}







\begin{frame}[fragile]{Structure de données \texttt{ndarray}}

\textbf{Exemple :} Création d'un objet \texttt{ndarray} à partir d'un objet itérable, ici une liste
\bigskip
\begin{lstlisting}[language=python, numbers=none]
>>> arr = np.array([])
>>> arr = np.array([1, 2])
>>> arr = np.array([[1, 2], [3, 4]])
>>> arr = np.array([[[1, 2], [3, 4]], [[5, 6], [7, 8]]])
\end{lstlisting}

Tableau de dimension 1 : \textbf{vecteur}

Tableau de dimension 2 : \textbf{matrice}

Tableau de dimension supérieure à 2 : \textbf{tenseur}.


\end{frame}


\begin{frame}[fragile]{Structure de données \texttt{ndarray}}

Différentes façons de créer des tableaux :

\begin{lstlisting}[language=python, numbers=none]
# Tableaux speciaux
zeros = np.zeros((3, 4))        
ones = np.ones((2, 3))          
identity = np.eye(4)            

# Sequences
arange = np.arange(0, 10, 2)    
linspace = np.linspace(0, 1, 5) 

# Aleatoires
random = np.random.rand(3, 3)   
randn = np.random.randn(3, 3)   
\end{lstlisting}

\end{frame}








\begin{frame}[fragile]{Structure de données \texttt{ndarray}}

  \begin{block}{Indexing et slicing}
    \medskip
    L'accès aux éléments d'un tableau NumPy se fait \textbf{par indices}:
\begin{lstlisting}[language=python, numbers=none]
# 1D array, vecteur
arr[start:end:step]

# 2D array, matrice
arr[start:end:step, start:end:step]

# 3D array, tenseur
arr[start:end:step, start:end:step, start:end:step]
\end{lstlisting}
  \end{block}
\end{frame}



\begin{frame}[fragile]{Structure de données \texttt{ndarray}}
  \textbf{Exemples :}

\begin{lstlisting}[language=python, numbers=none]
# Tableau 2D (matrice)
matrice = np.array([[1, 2, 3],
                    [4, 5, 6]])
print(matrice.shape)  # (2, 3)

# Tableau 3D (tenseur)
tenseur = np.zeros((3, 4, 5))  # 3 couches, 4 lignes, 5 cols

# Indexation
print(matrice[0, 1])      
print(matrice[:, 0])      
print(matrice[1, :])      
\end{lstlisting}


\end{frame}







\begin{frame}[fragile]
\frametitle{Listes vs tableaux NumPy}

\begin{columns}
\column{0.5\textwidth}
\textbf{Listes}
\begin{itemize}
    \item Conteneur générique
    \item Peut contenir des types mixtes
    \item Flexible (append, insert, etc.)
    \item Plus lent pour les calculs
\end{itemize}

\begin{lstlisting}[language=python, numbers=none]
lst = [1, 2, 3, 4]
mixed = [1, "bonjour", 3.14]
\end{lstlisting}

\column{0.5\textwidth}



\end{columns}

\end{frame}





\begin{frame}[fragile]
\frametitle{Listes vs tableaux NumPy}

\begin{columns}
\column{0.5\textwidth}
\textbf{Listes}
\begin{itemize}
    \item Conteneur générique
    \item Peut contenir des types mixtes
    \item Flexible (append, insert, etc.)
    \item Plus lent pour les calculs
\end{itemize}

\begin{lstlisting}[language=python, numbers=none]
lst = [1, 2, 3, 4]
mixed = [1, "bonjour", 3.14]
\end{lstlisting}

\column{0.5\textwidth}
\textbf{Tableaux NumPy}
\begin{itemize}
    \item Optimisé pour les données numériques
    \item Type fixe (homogène)
    \item Taille fixe (redimensionnement possible)
    \item Beaucoup plus rapide
\end{itemize}

\begin{lstlisting}[language=python, numbers=none]
# Tableau NumPy
arr = np.array([1, 2, 3, 4])
\end{lstlisting}

\end{columns}

\end{frame}

\begin{frame}[fragile]
\frametitle{Comparaison de performance}

\textbf{Pourquoi NumPy est-il plus rapide ?}

\begin{itemize}
    \item Écrit en C (code compilé)
    \item Stockage contigu en mémoire
    \item \textcolor{red}{Opérations vectorisées} (pas de boucles Python)
\end{itemize}

\vspace{0.5cm}

\begin{lstlisting}[language=python, numbers=none]
# Liste Python : element par element (lent)
lst = [1, 2, 3, 4, 5]
result = [x * 2 for x in lst]

# NumPy : operation vectorisee (rapide !)
arr = np.array([1, 2, 3, 4, 5])
result = arr * 2
\end{lstlisting}

\vspace{0.3cm}
\textbf{Différence de vitesse :} NumPy peut être 10 à 100x plus rapide pour de grandes données !

\end{frame}


\begin{frame}[fragile]{Opérations : listes vs NumPy}

\begin{lstlisting}[language=python, numbers=none]
# Listes Python - necessite des boucles
liste1 = [1, 2, 3]
liste2 = [4, 5, 6]
resultat = [a + b for a, b in zip(liste1, liste2)]

# NumPy - operations vectorisees
arr1 = np.array([1, 2, 3])
arr2 = np.array([4, 5, 6])
resultat = arr1 + arr2  # Addition element par element

# Operations mathematiques
arr = np.array([1, 2, 3, 4])
print(np.mean(arr))      
print(np.std(arr))       
print(np.sum(arr))       
\end{lstlisting}

\end{frame}

\begin{frame}[fragile]{Algèbre linéaire}

NumPy fournit des opérations matricielles efficaces :

\begin{lstlisting}[language=python, numbers=none]
# Creer des matrices
A = np.array([[1, 2], [3, 4]])
B = np.array([[5, 6], [7, 8]])

# Multiplication matricielle
C = A @ B  # ou np.dot(A, B)

# Operations matricielles
det = np.linalg.det(A)        
inv = np.linalg.inv(A)        
valeurs_propres = np.linalg.eig(A)  

# Transposee
A_T = A.T
\end{lstlisting}

\end{frame}



\begin{frame}[fragile]{Broadcasting : le super pouvoir de NumPy}

Le broadcasting permet des opérations entre tableaux de formes différentes :

\begin{lstlisting}[language=python, numbers=none]
# Ajouter un scalaire a un tableau
arr = np.array([1, 2, 3, 4])
resultat = arr + 10

# Ajouter un vecteur 1D a chaque ligne d'une matrice 2D
matrice = np.array([[1, 2, 3],
                    [4, 5, 6]])
vecteur = np.array([10, 20, 30])
resultat = matrice + vecteur
\end{lstlisting}

\small
Le broadcasting élimine le besoin de boucles explicites et est très efficace !

\end{frame}



\begin{frame}[fragile]{Quand utiliser chaque structure}

\begin{table}
\small
\begin{tabular}{|l|l|l|}
\hline
\textbf{Structure} & \textbf{Utiliser quand...} & \textbf{Exemple} \\
\hline
\textbf{Liste} & Types mixtes nécessaires & \texttt{['nom', 42, True]} \\
 & Insertions fréquentes & Collections dynamiques \\
 & Petits ensembles & Données de config \\
\hline
\textbf{NumPy} & Calculs numériques & Opérations matricielles \\
 & Grands ensembles & Données scientifiques \\
 & Opérations vectorisées & Traitement d'images \\
 & Opérations mathématiques & Statistiques, ML \\
\hline
\end{tabular}
\end{table}

\vspace{0.5cm}
\textbf{Règle générale :} NumPy pour les nombres, listes pour tout le reste !

\end{frame}


\begin{frame}[fragile]{Comparaison avec d'autres structures}

\begin{table}
\begin{tabular}{|l|c|c|c|c|}
\hline
\textbf{Critère} & \textbf{Liste} & \textbf{Tuple} & \textbf{NumPy} & \textbf{Dict} \\
\hline
Mutable & Oui & Non & Oui & Oui \\
\hline
Types mixtes & Oui & Oui & \textcolor{red}{Non} & Oui \\
\hline
Opérations math & Lent & Lent & \textcolor{blue}{Rapide} & Non \\
\hline
Accès élément & O(1) & O(1) & O(1) & O(1) \\
\hline
Mémoire & Élevée & Moyenne & \textcolor{blue}{Faible} & Élevée \\
\hline
Multi-dim & Non & Non & \textcolor{blue}{Oui} & Non \\
\hline
\end{tabular}
\end{table}

\end{frame}



\begin{frame}
\frametitle{Résumé}

\textbf{Points clés :}

\begin{itemize}
    \item Les tableaux NumPy sont optimisés pour les calculs numériques
    \item Beaucoup plus rapides que les listes Python pour les opérations mathématiques
    \item Type fixe, mémoire contiguë, opérations vectorisées
    \item Essentiel pour le calcul scientifique, l'analyse de données et le ML
    \item Utilisez NumPy pour les nombres, les listes pour les collections génériques
    \item Le broadcasting permet des opérations puissantes \textcolor{red}{sans boucles}
\end{itemize}

\end{frame}








\section{Librairies Pandas pour le traitement de données}



\input{pandas.tex}

  
  \section{Visualisation de données : Matplotlib}
  
  
  \begin{frame}{\includegraphics[width=.2\textwidth]{img/logo_matplotlib}}
  
    \begin{block}{En bref}
      \medskip
    Matplotlib est LA librairie incontournable pour visualiser des données
    \end{block}
  
    \begin{block}{Liens utiles}
      \begin{itemize}
        \item Site  officiel : \href{https://matplotlib.org/}{matplotlib.org}
        \item {\it Third party packages} : \href{https://matplotlib.org/stable/thirdpartypackages/index.html}{matplotlib.org/stable/thirdpartypackages}
        \item Exemples : \href{https://matplotlib.org/stable/gallery/index.html}{matplotlib.org/stable/gallery}
        \item Tutoriel : \href{https://github.com/matplotlib/AnatomyOfMatplotlib}{github.com/matplotlib/AnatomyOfMatplotlib}
      \end{itemize}
    \end{block}
  
  \end{frame}
  
  
  

  \begin{frame}[fragile]{\includegraphics[width=.2\textwidth]{img/logo_matplotlib}}
  
    \begin{columns}[T]
      \begin{column}{.48\textwidth}
        \begin{block}{Concepts}
          \begin{itemize}
            \item Objet de classe ``Figure''
            \item Objet de classe ``Axes''
            \item Plusieurs graphiques sur une même figure : Subplots
          \end{itemize}
        \end{block}
      \end{column}
  
      \begin{column}{.48\textwidth}
        \begin{center}
          \includegraphics[width=\textwidth]{img/Figure_Axes}
        \end{center}
      \end{column}
    \end{columns}

    \begin{block}{Convention d'import}
\begin{lstlisting}[language=Python, numbers=none]
import matplotlib.pyplot as plt
\end{lstlisting}
    \end{block}

  \end{frame}


  \begin{frame}[fragile]{\includegraphics[width=.2\textwidth]{img/logo_matplotlib.png} Figures, Axes}
  
      \begin{block}{Figure}
          \begin{itemize}
            \item La ``fenêtre'' contenant tous les objets composant le ou les graphiques
            \item Un objet Figure peut contenir : titre, sous-titre, légende, etc.
            \item Une figure est créée comme suit :
          \end{itemize}
      \end{block}
\begin{lstlisting}[language=Python, numbers=none]
fig = plt.figure()
\end{lstlisting}
  
    \begin{block}{Axes}
        \begin{itemize}
          \item Dans une figure, on ajoute un ou plusieurs objets \textcolor{orange}{Axes}
          \item Un tel objet est une \textcolor{orange}{r\'egion} de l'image qui recevra les \textcolor{orange}{donn\'es à visualiser}
          \item Une figure peut contenir plusieurs axes
          \item Un axe contient deux ou trois objets \textcolor{orange}{Axis}
        \end{itemize}
    \end{block}
  \end{frame}


  
  
  \begin{frame}[fragile]{\includegraphics[width=.2\textwidth]{img/logo_matplotlib} Figures and Axes}
\begin{lstlisting}[language=Python, morekeywords={as}, numbers=none]
import matplotlib.pyplot as plt

fig = plt.figure() # Create the Figure object

# Add an Axe to this figure
ax = fig.add_axes([0.5,0.5,0.8,0.8]) # dimensions [left, bottom, width, height] of the new axes

# Plot the distribution of the wind variable in the axe
g1 = ax.hist(x=seattle_weather['wind'])

# Add a title and labels for the x-axis and the y-axis
ax.set_title("Histogram with default parameters")
ax.set_xlabel("Wind")
ax.set_ylabel("Count")

plt.show() # Show the plot
\end{lstlisting}
  \end{frame}
  
  \begin{frame}[fragile]{\includegraphics[width=.2\textwidth]{img/logo_matplotlib} Figures and Axes}
\begin{lstlisting}[language=Python, morekeywords={as}, numbers=none]
# Short version: figure and axes objects are automatically created

import matplotlib.pyplot as plt

# Plot the distribution of the wind using a histogram
plt.hist(x=seattle_weather["wind"])

# Add a title
plt.title("Histogram with default parameters")

# Add labels for the x-axis and the y-axis
plt.xlabel("Wind")
plt.ylabel("Count")

plt.show() # Show the plot
\end{lstlisting}
  \end{frame}
  
  \begin{frame}{\includegraphics[width=.2\textwidth]{img/logo_matplotlib} Subplots}
    \begin{block}{Qu'est-ce qu'un subplot?}
      \begin{itemize}
        \item La méthode \texttt{matplotlib.pyplot.subplots} crée plusieurs graphiques \textcolor{orange}{sur une même figure}.
        \item Elle retourne un tuple (fig, ax) en fonction du nombre de lignes et de colonnes souhaitées.
      \end{itemize}
    \end{block}
    Plus de détails
    \begin{itemize}
      \item \href{https://www.educative.io/edpresso/what-is-a-subplots-in-matplotlib}{educative.io/edpresso/what-is-a-subplots-in-matplotlib}
      \item \href{https://matplotlib.org/stable/gallery/subplots_axes_and_figures/subplots_demo.html}{matplotlib.org/stable/gallery/subplots\_axes\_and\_figures}
    \end{itemize}
  \end{frame}
  
  
  \begin{frame}[fragile]{\includegraphics[width=.2\textwidth]{img/logo_matplotlib} Subplots}
  
    \begin{block}{Usage 1}
\begin{lstlisting}[language=Python, morekeywords={as}, numbers=none]
import matplotlib.pyplot as plt

# Create a subplot with 1 row and 2 columns
fig, (ax1, ax2) = plt.subplots(1, 2)

# Hist on the 1st column
ax1.hist(x)

# Scatter on the 2nd column
ax2.scatter(x, y)

# Show the plot
plt.show()
\end{lstlisting}
    \end{block}
  
  \end{frame}
  
  \begin{frame}[fragile]{\includegraphics[width=.2\textwidth]{img/logo_matplotlib} Subplots}
  
    \begin{block}{Usage 2}
\begin{lstlisting}[language=Python, morekeywords={as}, numbers=none]
import matplotlib.pyplot as plt

# Create the figure
fig = plt.figure()

# Create an histogram on the 1st subplot
plt.subplot(121) # or plt.subplot(1, 2, 1)
plt.hist(x)

# Create scatter plot on the 2nd subplot
plt.subplot(122) # or plt.subplot(1, 2, 2)
plt.scatter(x, y)

# Show the plot
plt.show()
\end{lstlisting}
    \end{block}
  
  \end{frame}



  \begin{frame}{Seaborn: high-level interface of matplotlib}

    \begin{block}{Overview of seaborn}
      \medskip
      Seaborn is a \textcolor{blue}{complementary} library for Matplotlib, which provides a high-level \textcolor{blue}{interface} to draw \textcolor{blue}{statistical} graphics.
  
      It uses Pandas data frames
    \end{block}
  
    \begin{block}{Useful links}
      \medskip
      \begin{itemize}
        \item Gallery: \href{https://seaborn.pydata.org/examples/index.html}{seaborn.pydata.org/examples}
        \item Tutorial: \href{https://seaborn.pydata.org/tutorial.html}{seaborn.pydata.org/tutorial}
      \end{itemize}
      
    \end{block}
  \end{frame}
  
  
  
  \begin{frame}{Seaborn: high-level interface of matplotlib}
  
    \begin{columns}[T]
      \begin{column}{.25\textwidth}
       \medskip
       \centering
       \textsc{Figure-level}
       
       vs
       
       \textsc{Axes-level}
      \end{column}
  
      \begin{column}{.25\textwidth}
        \medskip
        \centering
        \textsc{Relational}
  
        \textsc{Distributional}
  
        \textsc{Categorical}
      \end{column}
  
    \end{columns}
  
    \centering
    \includegraphics[width=.7\textwidth]{/Users/baptistegregorutti/Documents/Repositories/gitlab/data-visualization-slides/dataviz_python/img/seaborn-overview.png}
  \end{frame}
  
  
  
  
  \begin{frame}[fragile,t]{Figure-level vs Axes-level functions}
  
    \begin{block}{Axes-level}
      \medskip
      Axes-level functions plots data onto a single matplotlib Axes object ax
    \end{block}
  
\begin{lstlisting}[language=python, numbers=none]
# creates a chart in an existing axes object
sns.histplot(data=df, x="temperature", ax=ax)
\end{lstlisting}
  
    \onslide<2>{
      \begin{block}{Figure-level}
        \medskip
        Figure-level functions interface with matplotlib through a seaborn object that manages the figure.
        
        For each task, the figure-level function is an interface to various axes-level functions
        
        % For example, the figure-level function `displot` is an interface to the axes-level functions `histplot`, `kdeplot`, etc. see the figure below.
      \end{block}
    }
    \begin{onlyenv}<2>
\begin{lstlisting}[language=python, numbers=none]
sns.displot(data=df, x="temperature", kind="hist")
\end{lstlisting}    
    \end{onlyenv}
  \end{frame}
  
  
  
  
  \begin{frame}{Figure-level vs Axes-level functions}
  
    \begin{columns}[T]
      \begin{column}{.25\textwidth}
       \medskip
       \centering
       \textsc{Figure-level}
       
       vs
       
       \textsc{Axes-level}
      \end{column}
  
      \begin{column}{.25\textwidth}
  
      \end{column}
  
    \end{columns}
  
    \centering
    \includegraphics[width=.7\textwidth]{/Users/baptistegregorutti/Documents/Repositories/gitlab/data-visualization-slides/dataviz_python/img/seaborn-overview.png}
  \end{frame}
  
  
  \begin{frame}[fragile]{Same usage / Different tasks}
  
    \begin{block}{The functions have (almost) the same signature}
      \medskip
      \begin{itemize}
        \item data: a pandas DataFrame
        \item x, y: columns names in the data frame
        \item hue: name of the column used to add colors
        \item ax: maplotlib Axes object in which to draw the plot
      \end{itemize}
      
    \end{block}
  
\begin{lstlisting}[language=python, numbers=none]
# Scatter plot
sns.scatterplot(data=df, x="time", y="temperature", ax=ax)

# Line plot
sns.lineplot(data=df, x="time", y="temperature", ax=ax)

# Line plot, Figure-level function
sns.relplot(data=df, x="time", y="temperature", kind="line")
\end{lstlisting}
  
  \end{frame}
  
  \begin{frame}[fragile]{Statistical graphics}
  
    Seaborn integrates statistics into the graphics making easier the analysis of the data.
  
    \begin{itemize}
      \item Automatic computation of statistics: mean, confidence interval, error bars, etc.
      \item Automatic linear regression fitting
    \end{itemize}
    
    \begin{center}
      \includegraphics[width=.4\textwidth]{/Users/baptistegregorutti/Documents/Repositories/gitlab/data-visualization-slides/dataviz_python/img/cat-error-bar.png}
      \includegraphics[width=.4\textwidth]{/Users/baptistegregorutti/Documents/Repositories/gitlab/data-visualization-slides/dataviz_python/img/reg-fit.png}
    \end{center}
  
  \end{frame}
  
  \begin{frame}[fragile]{Figure aesthetics}
    The aesthetics can be modified, helping the communication of insights
  
    The function \texttt{set\_theme} modifes the background, the color palette, the font, etc.

\begin{lstlisting}[language=python, numbers=none]
# Default theme
sns.set_theme()

# Dark background with a grid
sns.set_theme(style="darkgrid")

# White background with a grid
sns.set_theme(style="whitegrid", palette="pastel")
\end{lstlisting}
    
    \begin{center}
      \includegraphics[width=.3\textwidth]{/Users/baptistegregorutti/Documents/Repositories/gitlab/data-visualization-slides/dataviz_python/img/set-theme-1.png}
      \includegraphics[width=.3\textwidth]{/Users/baptistegregorutti/Documents/Repositories/gitlab/data-visualization-slides/dataviz_python/img/set-theme-2.png}
      \includegraphics[width=.3\textwidth]{/Users/baptistegregorutti/Documents/Repositories/gitlab/data-visualization-slides/dataviz_python/img/set-theme-3.png}
    \end{center}
  
  \end{frame}


  
  
  
  \begin{frame}[fragile]{Some examples}
  
    \begin{block}{Plotting distributions}
\begin{lstlisting}[language=python, numbers=none]
# Axes-level histogram
sns.histplot(x="value", hue="variable", data=df)

# Figure-level histogram
sns.displot(x="value", hue="variable", data=df)
\end{lstlisting}
    \end{block}
  
    \begin{center}
      \includegraphics[width=.4\textwidth]{img/hist_axe.png}
      \includegraphics[width=.4\textwidth]{img/hist_figure.png}
    \end{center}
  
  \end{frame}
  
\begin{frame}[fragile]{Some examples}
  
  \begin{block}{Plotting distributions}
\begin{lstlisting}[language=python, numbers=none]
# Axes-level histogram
sns.kdeplot(x="value", hue="variable", data=df)

# Figure-level histogram
sns.displot(x="value", hue="variable", data=df, kind="kde")
\end{lstlisting}
  \end{block}
  
  \begin{center}
    \includegraphics[width=.4\textwidth]{img/kde_axe.png}
    \includegraphics[width=.4\textwidth]{img/kde_figure.png}
  \end{center}

\end{frame}

  
  
  \begin{frame}[fragile]{Some examples}
  
    \begin{block}{}
\begin{lstlisting}[language=python, numbers=none]
# Pairplot / Matrix of scatterplots
sns.pairplot(x)

# Joint plot
sns.jointplot(x)
\end{lstlisting}
    \end{block}
  
    \begin{center}
      \includegraphics[width=.4\textwidth]{img/scatterplot_matrix}
      \includegraphics[width=.4\textwidth]{img/joint}
    \end{center}
  
\end{frame}


    
\begin{frame}{Seaborn: high-level interface of matplotlib}
  \begin{center}
    \includegraphics[width=\textwidth]{/Users/baptistegregorutti/Documents/Repositories/gitlab/data-visualization-slides/dataviz_python/img/seaborn-cheat.png}
  \end{center}
  \tiny{Source: interactivechaos.com}
\end{frame}




\end{document}